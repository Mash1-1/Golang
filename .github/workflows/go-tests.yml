name: Go Unit Tests

on:
    push:
        branches: [main]
    pull_request:
        branches: [main]

jobs:
    test:
        runs-on: ubuntu-latest

        defaults:
            run:
                working-directory: Testify/task-manager # ğŸ‘ˆ your Go project folder

        steps:
            - name: ğŸ“¥ Checkout code
              uses: actions/checkout@v3

            - name: ğŸ”§ Set up Go
              uses: actions/setup-go@v4
              with:
                  go-version: "1.22"

            - name: ğŸ“¦ Install dependencies
              run: go mod tidy

            - name: ğŸ§ª Run Unit Tests
              run: go test -v ./...

            - name: ğŸ“Š Generate Coverage Report
              run: |
                  go test -coverprofile=coverage.out ./...
                  go tool cover -func=coverage.out
